# Unified Access Gateway Configuration
#
# Configuration Categories:
# 1. Infrastructure Config - Set here or via environment variables
# 2. Business Config - Loaded from Redis (not configured here)
#
# See docs/CONFIGURATION.md for details

# =============================================================================
# Infrastructure Configuration (can be set here or via env vars)
# =============================================================================

metrics:
  enabled: true
  listen_addr: ":9090"

security:
  # Redis connection settings (Infrastructure)
  redis:
    enabled: true
    addr: "10.1.0.8:6379" # ECS cluster Redis
    password: ""
    db: 0
    key_prefix: "uag:"

  # Audit logging (Infrastructure)
  audit:
    enabled: true
    sink: "stdout" # stdout, stderr, file:///var/log/uag/audit.log

# =============================================================================
# Business Configuration - READ FROM REDIS
# The following are NOT configured here, they must be set in Redis:
#
# Redis Key: uag:business:config
#   - server.listen_addr
#   - server.max_connections
#   - backends.http.target_url
#   - backends.http.timeout
#   - backends.tcp.target_addr
#   - backends.tcp.timeout
#   - lifecycle.shutdown_timeout
#   - lifecycle.drain_wait_time
#
# Redis Key: uag:rate_limit
#   - enabled, rps, burst
#
# Redis Key: uag:waf:config
#   - enabled
#
# Redis Key: uag:waf:blocked_ips (Set)
# Redis Key: uag:waf:blocked_patterns (Set)
# Redis Key: uag:auth:config
# Redis Key: uag:auth:allowed_subjects (Set)
#
# If Redis is unavailable, gateway will report NOT READY via /ready endpoint
# =============================================================================
